<html>
   <head>
       <meta charset='utf-8'>
       <title>Nguyễn Thị Ái Nhi</title>
       <script type="text/javascript">
        function get_weather_api()
        {
            var xhr = new XMLHttpRequest();
            xhr.open("GET","https://webapi.dantri.com.vn/misc",true);
            xhr.send();
            xhr.onreadystatechange = function()
            {
                if (xhr.readyState==4 && xhr.status==200)
                {
                    var my_div = document.getElementById("my_div");
                    var string_json = xhr.responseText;
                    my_div.innerText = string_json;
                    var object_json = JSON.parse(string_json);
                    var weathers = object_json.weathers;
                    display_weather(weathers);
                }
            }
        }

        function display_weather(weathers)
        {
            var weather_tbody = document.getElementById("weather_tbody");
            weather_tbody.innerHTML = ''; // Clear existing content
            
            for(var i = 0; i < weathers.length; i++) {
                var weather = weathers[i];
                var tr = document.createElement("tr");
                var td_city = document.createElement("td");
                var td_temp = document.createElement("td");
                var td_status = document.createElement("td");
                var td_icon = document.createElement("td");

                td_city.innerText = weather.name;
                td_temp.innerText = weather.temperature;
                td_status.innerText = weather.clouds;
                
                var icon = "https://openweathermap.org/img/wn/" + weather.icon + "@2x.png";
                var img_icon = document.createElement("img");
                img_icon.setAttribute("src", icon);
                td_icon.appendChild(img_icon);

                tr.appendChild(td_city);
                tr.appendChild(td_temp);
                tr.appendChild(td_status);
                tr.appendChild(td_icon);

                weather_tbody.appendChild(tr);
            }
        }
        
       </script>
   </head>
   <body onload="get_weather_api()">
        <div id="my_div" style="height:150px;overflow-y: scroll;background-color: antiquewhite;">

        </div>

       <table border="1">
        <caption>
            Weathers:
        </caption>
        <thead>
            <th>City/Province</th>
            <th>Temperature</th>
            <th>Status</th>
            <th>Icon</th>
        </thead>
        <tbody id="weather_tbody">

        </tbody>
       </table>
   </body>
</html>
